<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PROJECT_NAME: Dave/Model/APPS/FREERTOS/v4_1_2/Templates/portable/IAR/ARM_CM4F/portasm_mpu.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PROJECT_NAME
   &#160;<span id="projectnumber">PROJECT_NUMBER</span>
   </div>
   <div id="projectbrief">PROJECT_BRIEF</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9ae8d336e4569e0680d3e2193cd995f2.html">Dave</a></li><li class="navelem"><a class="el" href="dir_490bed8d9998c4a99839e21f8ea581e9.html">Model</a></li><li class="navelem"><a class="el" href="dir_33846ca2b359b82220662b9710bd22e5.html">APPS</a></li><li class="navelem"><a class="el" href="dir_248eba3674ae8bcb079875a3cd0e3dd0.html">FREERTOS</a></li><li class="navelem"><a class="el" href="dir_79d0790edffd36fa09e12a820aaca3fd.html">v4_1_2</a></li><li class="navelem"><a class="el" href="dir_76eb16d7d451661575af6a6ac154b6cc.html">Templates</a></li><li class="navelem"><a class="el" href="dir_e63ee3f6a044beec70b44fe174abeade.html">portable</a></li><li class="navelem"><a class="el" href="dir_d7382bd17e674b025fd6080b6b251069.html">IAR</a></li><li class="navelem"><a class="el" href="dir_5c4794511badffe264ded47bb29a895c.html">ARM_CM4F</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">portasm_mpu.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="portasm__mpu_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * FreeRTOS Kernel V10.0.1</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (C) 2017 Amazon.com, Inc. or its affiliates.  All Rights Reserved.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a copy of</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * this software and associated documentation files (the &quot;Software&quot;), to deal in</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * the Software without restriction, including without limitation the rights to</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * the Software, and to permit persons to whom the Software is furnished to do so,</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * subject to the following conditions:</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * The above copyright notice and this permission notice shall be included in all</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * copies or substantial portions of the Software.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * http://www.FreeRTOS.org</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * http://aws.amazon.com/freertos</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * 1 tab == 4 spaces!</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_free_r_t_o_s_config_8h.html">FREERTOS/FreeRTOSConfig.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="portasm__mpu_8h.html#acab39580f1d9ee1ad1e81328cc9ee79d">   30</a></span>&#160;    RSEG    <a class="code" href="portasm__mpu_8h.html#acab39580f1d9ee1ad1e81328cc9ee79d">CODE</a>:<a class="code" href="portasm__mpu_8h.html#acab39580f1d9ee1ad1e81328cc9ee79d">CODE</a>(2)</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    thumb</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    EXTERN <a class="code" href="_generated_2_f_r_e_e_r_t_o_s_2tasks_8c.html#acdecf2afe97343aba42b111bc6df9eea">pxCurrentTCB</a></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    EXTERN <a class="code" href="_generated_2_f_r_e_e_r_t_o_s_2task_8h.html#a26df422f8d635d5191a3e106fbeeed68">vTaskSwitchContext</a></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    EXTERN <a class="code" href="_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h.html#ab620761336a86016a92fe379d409ac4b">vPortSVCHandler_C</a></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    PUBLIC <a class="code" href="_free_r_t_o_s_config_8h.html#a2f28babe350ab894c4d26e47d7a2d8c7">xPortPendSVHandler</a></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    PUBLIC <a class="code" href="portasm__mpu_8h.html#a834715accaafb0ba8885ca2f76ec8a7c">vPortSVCHandler</a></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    PUBLIC <a class="code" href="_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h.html#af64e1d94c315eeda3ccf941ec0bcb579">vPortStartFirstTask</a></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    PUBLIC <a class="code" href="_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h.html#a9ff246b1dcf8d5478bfb6f0b88258513">vPortEnableVFP</a></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    PUBLIC <a class="code" href="_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h.html#a3b9ca89bea1639d6dad074cee491b60b">vPortRestoreContextOfFirstTask</a></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    PUBLIC <a class="code" href="_g_c_c_2_a_r_m___c_m4_f_2port__mpu_8h.html#a9186126cddff3ed07fdebd474fb26bd5">xPortRaisePrivilege</a></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">/*-----------------------------------------------------------*/</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<a class="code" href="_free_r_t_o_s_config_8h.html#a2f28babe350ab894c4d26e47d7a2d8c7">xPortPendSVHandler</a>:</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    mrs <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, <a class="code" href="portasm__mpu_8h.html#a969e33de7c456ce35cb35d342930b117">psp</a></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    isb</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="comment">/* Get the location of the current TCB. */</span></div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="portasm__mpu_8h.html#a0152a99572909a24318f8abe1473a18b">   50</a></span>&#160;    ldr <a class="code" href="portasm__mpu_8h.html#a0152a99572909a24318f8abe1473a18b">r3</a>, =<a class="code" href="_generated_2_f_r_e_e_r_t_o_s_2tasks_8c.html#acdecf2afe97343aba42b111bc6df9eea">pxCurrentTCB</a></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    ldr <a class="code" href="portasm__mpu_8h.html#a61676af66ca4dea21a560ba50c541a56">r2</a>, [<a class="code" href="portasm__mpu_8h.html#a0152a99572909a24318f8abe1473a18b">r3</a>]</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">/* Is the task using the FPU context?  If so, push high vfp registers. */</span></div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="portasm__mpu_8h.html#aab48038750bdfe34947e4b1e8b28b21c">   54</a></span>&#160;    tst <a class="code" href="portasm__mpu_8h.html#aab48038750bdfe34947e4b1e8b28b21c">r14</a>, <span class="preprocessor">#0x10</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    it eq</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">   56</a></span>&#160;    vstmdbeq <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>!, {s16-s31}</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="comment">/* Save the core registers. */</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    mrs <a class="code" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a>, <a class="code" href="portasm__mpu_8h.html#a74c2020176ad9adfbe1f144348dc39e4">control</a></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    stmdb <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>!, {<a class="code" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a>, r4-r11, <a class="code" href="portasm__mpu_8h.html#aab48038750bdfe34947e4b1e8b28b21c">r14</a>}</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment">/* Save the new top of stack into the first member of the TCB. */</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    str <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, [<a class="code" href="portasm__mpu_8h.html#a61676af66ca4dea21a560ba50c541a56">r2</a>]</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="portasm__mpu_8h.html#a9aa6710dd342172a8f80299233af565e">   65</a></span>&#160;    stmdb <a class="code" href="portasm__mpu_8h.html#a9aa6710dd342172a8f80299233af565e">sp</a>!, {<a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, <a class="code" href="portasm__mpu_8h.html#a0152a99572909a24318f8abe1473a18b">r3</a>}</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    mov <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, #<a class="code" href="_free_r_t_o_s_config_8h.html#a54bfc31c410ee452577a25a4552c3704">configMAX_SYSCALL_INTERRUPT_PRIORITY</a></div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="portasm__mpu_8h.html#a864ab2264de6ae07e38fc818e26ba505">   67</a></span>&#160;    msr <a class="code" href="portasm__mpu_8h.html#a864ab2264de6ae07e38fc818e26ba505">basepri</a>, <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    dsb</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    isb</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    bl <a class="code" href="_generated_2_f_r_e_e_r_t_o_s_2task_8h.html#a26df422f8d635d5191a3e106fbeeed68">vTaskSwitchContext</a></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    mov <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, #0</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    msr <a class="code" href="portasm__mpu_8h.html#a864ab2264de6ae07e38fc818e26ba505">basepri</a>, <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    ldmia <a class="code" href="portasm__mpu_8h.html#a9aa6710dd342172a8f80299233af565e">sp</a>!, {<a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, <a class="code" href="portasm__mpu_8h.html#a0152a99572909a24318f8abe1473a18b">r3</a>}</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment">/* The first item in pxCurrentTCB is the task top of stack. */</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    ldr <a class="code" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a>, [<a class="code" href="portasm__mpu_8h.html#a0152a99572909a24318f8abe1473a18b">r3</a>]</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    ldr <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, [<a class="code" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a>]</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">/* Move onto the second item in the TCB... */</span></div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">   79</a></span>&#160;    add <a class="code" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a>, <a class="code" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a>, #4</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">/* Region Base Address register. */</span></div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="portasm__mpu_8h.html#a61676af66ca4dea21a560ba50c541a56">   81</a></span>&#160;    ldr <a class="code" href="portasm__mpu_8h.html#a61676af66ca4dea21a560ba50c541a56">r2</a>, =0xe000ed9c</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">/* Read 4 sets of MPU registers. */</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    ldmia <a class="code" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a>!, {r4-r11}</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">/* Write 4 sets of MPU registers. */</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    stmia <a class="code" href="portasm__mpu_8h.html#a61676af66ca4dea21a560ba50c541a56">r2</a>!, {r4-r11}</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">/* Pop the registers that are not automatically saved on exception entry. */</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    ldmia <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>!, {<a class="code" href="portasm__mpu_8h.html#a0152a99572909a24318f8abe1473a18b">r3</a>-r11, <a class="code" href="portasm__mpu_8h.html#aab48038750bdfe34947e4b1e8b28b21c">r14</a>}</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    msr <a class="code" href="portasm__mpu_8h.html#a74c2020176ad9adfbe1f144348dc39e4">control</a>, <a class="code" href="portasm__mpu_8h.html#a0152a99572909a24318f8abe1473a18b">r3</a></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment">/* Is the task using the FPU context?  If so, pop the high vfp registers</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">    too. */</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    tst <a class="code" href="portasm__mpu_8h.html#aab48038750bdfe34947e4b1e8b28b21c">r14</a>, #0x10</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    it eq</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    vldmiaeq <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>!, {s16-s31}</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    msr <a class="code" href="portasm__mpu_8h.html#a969e33de7c456ce35cb35d342930b117">psp</a>, <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    isb</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    bx <a class="code" href="portasm__mpu_8h.html#aab48038750bdfe34947e4b1e8b28b21c">r14</a></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">/*-----------------------------------------------------------*/</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="portasm__mpu_8h.html#a834715accaafb0ba8885ca2f76ec8a7c">  104</a></span>&#160;<a class="code" href="portasm__mpu_8h.html#a834715accaafb0ba8885ca2f76ec8a7c">vPortSVCHandler</a>:</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">    #ifndef USE_PROCESS_STACK   </span><span class="comment">/* Code should not be required if a main() is using the process stack. */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        tst lr, #4</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        ite eq</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        mrseq <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, <a class="code" href="portasm__mpu_8h.html#a8ceac5eac5866e7d2daab2c458fb8c1c">msp</a></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        mrsne <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, <a class="code" href="portasm__mpu_8h.html#a969e33de7c456ce35cb35d342930b117">psp</a></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        mrs <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, <a class="code" href="portasm__mpu_8h.html#a969e33de7c456ce35cb35d342930b117">psp</a></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        b <a class="code" href="_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h.html#ab620761336a86016a92fe379d409ac4b">vPortSVCHandler_C</a></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">/*-----------------------------------------------------------*/</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<a class="code" href="_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h.html#af64e1d94c315eeda3ccf941ec0bcb579">vPortStartFirstTask</a></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">/* Use the NVIC offset register to locate the stack. */</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    ldr <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, =0xE000ED08</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    ldr <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, [<a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>]</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    ldr <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, [<a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>]</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">/* Set the msp back to the start of the stack. */</span></div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="portasm__mpu_8h.html#a8ceac5eac5866e7d2daab2c458fb8c1c">  123</a></span>&#160;    msr <a class="code" href="portasm__mpu_8h.html#a8ceac5eac5866e7d2daab2c458fb8c1c">msp</a>, <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">/* Clear the bit that indicates the FPU is in use in case the FPU was used</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">    before the scheduler was started - which would otherwise result in the</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">    unnecessary leaving of space in the SVC stack for lazy saving of FPU</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">    registers. */</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    mov <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, #0</div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="portasm__mpu_8h.html#a74c2020176ad9adfbe1f144348dc39e4">  129</a></span>&#160;    msr <a class="code" href="portasm__mpu_8h.html#a74c2020176ad9adfbe1f144348dc39e4">control</a>, <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">/* Call SVC to start the first task. */</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    cpsie i</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    cpsie f</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    dsb</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    isb</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    svc 0</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">/*-----------------------------------------------------------*/</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<a class="code" href="_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h.html#a3b9ca89bea1639d6dad074cee491b60b">vPortRestoreContextOfFirstTask</a></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">/* Use the NVIC offset register to locate the stack. */</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    ldr <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, =0xE000ED08</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    ldr <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, [<a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>]</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    ldr <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, [<a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>]</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">/* Set the msp back to the start of the stack. */</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    msr <a class="code" href="portasm__mpu_8h.html#a8ceac5eac5866e7d2daab2c458fb8c1c">msp</a>, <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">/* Restore the context. */</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    ldr <a class="code" href="portasm__mpu_8h.html#a0152a99572909a24318f8abe1473a18b">r3</a>, =<a class="code" href="_generated_2_f_r_e_e_r_t_o_s_2tasks_8c.html#acdecf2afe97343aba42b111bc6df9eea">pxCurrentTCB</a></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    ldr <a class="code" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a>, [<a class="code" href="portasm__mpu_8h.html#a0152a99572909a24318f8abe1473a18b">r3</a>]</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">/* The first item in the TCB is the task top of stack. */</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    ldr <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, [<a class="code" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a>]</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">/* Move onto the second item in the TCB... */</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    add <a class="code" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a>, <a class="code" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a>, #4</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">/* Region Base Address register. */</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    ldr <a class="code" href="portasm__mpu_8h.html#a61676af66ca4dea21a560ba50c541a56">r2</a>, =0xe000ed9c</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">/* Read 4 sets of MPU registers. */</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    ldmia <a class="code" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a>!, {r4-r11}</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">/* Write 4 sets of MPU registers. */</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    stmia <a class="code" href="portasm__mpu_8h.html#a61676af66ca4dea21a560ba50c541a56">r2</a>!, {r4-r11}</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">/* Pop the registers that are not automatically saved on exception entry. */</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    ldmia <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>!, {<a class="code" href="portasm__mpu_8h.html#a0152a99572909a24318f8abe1473a18b">r3</a>-r11, <a class="code" href="portasm__mpu_8h.html#aab48038750bdfe34947e4b1e8b28b21c">r14</a>}</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    msr <a class="code" href="portasm__mpu_8h.html#a74c2020176ad9adfbe1f144348dc39e4">control</a>, <a class="code" href="portasm__mpu_8h.html#a0152a99572909a24318f8abe1473a18b">r3</a></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">/* Restore the task stack pointer. */</span></div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="portasm__mpu_8h.html#a969e33de7c456ce35cb35d342930b117">  163</a></span>&#160;    msr <a class="code" href="portasm__mpu_8h.html#a969e33de7c456ce35cb35d342930b117">psp</a>, <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    mov <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, #0</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    msr <a class="code" href="portasm__mpu_8h.html#a864ab2264de6ae07e38fc818e26ba505">basepri</a>, <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    bx <a class="code" href="portasm__mpu_8h.html#aab48038750bdfe34947e4b1e8b28b21c">r14</a></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">/*-----------------------------------------------------------*/</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<a class="code" href="_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h.html#a9ff246b1dcf8d5478bfb6f0b88258513">vPortEnableVFP</a></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">/* The FPU enable bits are in the CPACR. */</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    ldr.w <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, =0xE000ED88</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    ldr <a class="code" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a>, [<a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>]</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">/* Enable CP10 and CP11 coprocessors, then save back. */</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    orr <a class="code" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a>, <a class="code" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a>, #( 0xf &lt;&lt; 20 )</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    str <a class="code" href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a>, [<a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>]</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    bx  <a class="code" href="portasm__mpu_8h.html#aab48038750bdfe34947e4b1e8b28b21c">r14</a></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">/*-----------------------------------------------------------*/</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<a class="code" href="_g_c_c_2_a_r_m___c_m4_f_2port__mpu_8h.html#a9186126cddff3ed07fdebd474fb26bd5">xPortRaisePrivilege</a></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    mrs <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, <a class="code" href="portasm__mpu_8h.html#a74c2020176ad9adfbe1f144348dc39e4">control</a></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">/* Is the task running privileged? */</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    tst <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, #1</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    itte ne</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">/* CONTROL[0]!=0, return false. */</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    movne <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, #0</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">/* Switch to privileged. */</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    svcne 2 <span class="comment">/* 2 == portSVC_RAISE_PRIVILEGE */</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">/* CONTROL[0]==0, return true. */</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    moveq <a class="code" href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a>, #1</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    bx lr</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    END</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aportasm__mpu_8h_html_a8ceac5eac5866e7d2daab2c458fb8c1c"><div class="ttname"><a href="portasm__mpu_8h.html#a8ceac5eac5866e7d2daab2c458fb8c1c">msp</a></div><div class="ttdeci">RSEG psp isb ldr tst it eq vstmdbeq control stmdb stmdb msr r0 dsb isb bl vTaskSwitchContext mov msr r0 ldmia ldr add ldr r3 tst it eq vldmiaeq r0 isb bx r14 ite eq mrseq msp mrsne psp b vPortSVCHandler_C vPortStartFirstTask ldr ldr msr msp</div><div class="ttdef"><b>Definition:</b> <a href="portasm__mpu_8h_source.html#l00123">portasm_mpu.h:123</a></div></div>
<div class="ttc" id="a_g_c_c_2_a_r_m___c_m4_f_2port__mpu_8h_html_a9186126cddff3ed07fdebd474fb26bd5"><div class="ttname"><a href="_g_c_c_2_a_r_m___c_m4_f_2port__mpu_8h.html#a9186126cddff3ed07fdebd474fb26bd5">xPortRaisePrivilege</a></div><div class="ttdeci">BaseType_t xPortRaisePrivilege(void) __attribute__((naked))</div><div class="ttdef"><b>Definition:</b> <a href="_g_c_c_2_a_r_m___c_m4_f_2port__mpu_8h_source.html#l00642">port_mpu.h:642</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_config_8h_html_a2f28babe350ab894c4d26e47d7a2d8c7"><div class="ttname"><a href="_free_r_t_o_s_config_8h.html#a2f28babe350ab894c4d26e47d7a2d8c7">xPortPendSVHandler</a></div><div class="ttdeci">#define xPortPendSVHandler</div><div class="ttdef"><b>Definition:</b> <a href="_free_r_t_o_s_config_8h_source.html#l00144">FreeRTOSConfig.h:143</a></div></div>
<div class="ttc" id="a_generated_2_f_r_e_e_r_t_o_s_2tasks_8c_html_acdecf2afe97343aba42b111bc6df9eea"><div class="ttname"><a href="_generated_2_f_r_e_e_r_t_o_s_2tasks_8c.html#acdecf2afe97343aba42b111bc6df9eea">pxCurrentTCB</a></div><div class="ttdeci">PRIVILEGED_DATA TCB_t *volatile pxCurrentTCB</div><div class="ttdef"><b>Definition:</b> <a href="_generated_2_f_r_e_e_r_t_o_s_2tasks_8c_source.html#l00347">tasks.c:347</a></div></div>
<div class="ttc" id="aportasm__mpu_8h_html_a0152a99572909a24318f8abe1473a18b"><div class="ttname"><a href="portasm__mpu_8h.html#a0152a99572909a24318f8abe1473a18b">r3</a></div><div class="ttdeci">RSEG psp isb ldr r3</div><div class="ttdef"><b>Definition:</b> <a href="portasm__mpu_8h_source.html#l00050">portasm_mpu.h:50</a></div></div>
<div class="ttc" id="aportasm__mpu_8h_html_a61676af66ca4dea21a560ba50c541a56"><div class="ttname"><a href="portasm__mpu_8h.html#a61676af66ca4dea21a560ba50c541a56">r2</a></div><div class="ttdeci">RSEG psp isb ldr tst it eq vstmdbeq control stmdb stmdb msr r0 dsb isb bl vTaskSwitchContext mov msr r0 ldmia ldr add ldr r2</div><div class="ttdef"><b>Definition:</b> <a href="portasm__mpu_8h_source.html#l00081">portasm_mpu.h:81</a></div></div>
<div class="ttc" id="a_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h_html_a9ff246b1dcf8d5478bfb6f0b88258513"><div class="ttname"><a href="_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h.html#a9ff246b1dcf8d5478bfb6f0b88258513">vPortEnableVFP</a></div><div class="ttdeci">void vPortEnableVFP(void)</div><div class="ttdef"><b>Definition:</b> <a href="_keil_2_a_r_m___c_m4_f_2port__mpu_8h_source.html#l00552">port_mpu.h:552</a></div></div>
<div class="ttc" id="aportasm__mpu_8h_html_a74c2020176ad9adfbe1f144348dc39e4"><div class="ttname"><a href="portasm__mpu_8h.html#a74c2020176ad9adfbe1f144348dc39e4">control</a></div><div class="ttdeci">RSEG psp isb ldr tst it eq vstmdbeq control stmdb stmdb msr r0 dsb isb bl vTaskSwitchContext mov msr r0 ldmia ldr add ldr r3 tst it eq vldmiaeq r0 isb bx r14 ite eq mrseq msp mrsne psp b vPortSVCHandler_C vPortStartFirstTask ldr ldr msr r0 mov msr control</div><div class="ttdef"><b>Definition:</b> <a href="portasm__mpu_8h_source.html#l00129">portasm_mpu.h:129</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_config_8h_html_a54bfc31c410ee452577a25a4552c3704"><div class="ttname"><a href="_free_r_t_o_s_config_8h.html#a54bfc31c410ee452577a25a4552c3704">configMAX_SYSCALL_INTERRUPT_PRIORITY</a></div><div class="ttdeci">#define configMAX_SYSCALL_INTERRUPT_PRIORITY</div><div class="ttdef"><b>Definition:</b> <a href="_free_r_t_o_s_config_8h_source.html#l00107">FreeRTOSConfig.h:106</a></div></div>
<div class="ttc" id="a_generated_2_f_r_e_e_r_t_o_s_2task_8h_html_a26df422f8d635d5191a3e106fbeeed68"><div class="ttname"><a href="_generated_2_f_r_e_e_r_t_o_s_2task_8h.html#a26df422f8d635d5191a3e106fbeeed68">vTaskSwitchContext</a></div><div class="ttdeci">void vTaskSwitchContext(void) PRIVILEGED_FUNCTION</div><div class="ttdef"><b>Definition:</b> <a href="_generated_2_f_r_e_e_r_t_o_s_2tasks_8c_source.html#l02850">tasks.c:2850</a></div></div>
<div class="ttc" id="a_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h_html_af64e1d94c315eeda3ccf941ec0bcb579"><div class="ttname"><a href="_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h.html#af64e1d94c315eeda3ccf941ec0bcb579">vPortStartFirstTask</a></div><div class="ttdeci">void vPortStartFirstTask(void) PRIVILEGED_FUNCTION</div></div>
<div class="ttc" id="aportasm__mpu_8h_html_a834715accaafb0ba8885ca2f76ec8a7c"><div class="ttname"><a href="portasm__mpu_8h.html#a834715accaafb0ba8885ca2f76ec8a7c">vPortSVCHandler</a></div><div class="ttdeci">RSEG psp isb ldr tst it eq vstmdbeq control stmdb stmdb msr r0 dsb isb bl vTaskSwitchContext mov msr r0 ldmia ldr add ldr r3 tst it eq vldmiaeq r0 isb bx r14 vPortSVCHandler</div><div class="ttdef"><b>Definition:</b> <a href="portasm__mpu_8h_source.html#l00104">portasm_mpu.h:94</a></div></div>
<div class="ttc" id="aportasm__mpu_8h_html_a969e33de7c456ce35cb35d342930b117"><div class="ttname"><a href="portasm__mpu_8h.html#a969e33de7c456ce35cb35d342930b117">psp</a></div><div class="ttdeci">RSEG psp isb ldr tst it eq vstmdbeq control stmdb stmdb msr r0 dsb isb bl vTaskSwitchContext mov msr r0 ldmia ldr add ldr r3 tst it eq vldmiaeq r0 isb bx r14 ite eq mrseq msp mrsne psp b vPortSVCHandler_C vPortStartFirstTask ldr ldr msr r0 mov msr r0 cpsie i cpsie f dsb isb svc vPortRestoreContextOfFirstTask ldr ldr msr r0 ldr ldr add ldr r3 msr psp</div><div class="ttdef"><b>Definition:</b> <a href="portasm__mpu_8h_source.html#l00163">portasm_mpu.h:160</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_config_8h_html"><div class="ttname"><a href="_free_r_t_o_s_config_8h.html">FreeRTOSConfig.h</a></div></div>
<div class="ttc" id="aportasm__mpu_8h_html_a864ab2264de6ae07e38fc818e26ba505"><div class="ttname"><a href="portasm__mpu_8h.html#a864ab2264de6ae07e38fc818e26ba505">basepri</a></div><div class="ttdeci">RSEG psp isb ldr tst it eq vstmdbeq control stmdb stmdb msr basepri</div><div class="ttdef"><b>Definition:</b> <a href="portasm__mpu_8h_source.html#l00067">portasm_mpu.h:65</a></div></div>
<div class="ttc" id="aportasm__mpu_8h_html_acab39580f1d9ee1ad1e81328cc9ee79d"><div class="ttname"><a href="portasm__mpu_8h.html#acab39580f1d9ee1ad1e81328cc9ee79d">CODE</a></div><div class="ttdeci">RSEG CODE</div><div class="ttdef"><b>Definition:</b> <a href="portasm__mpu_8h_source.html#l00030">portasm_mpu.h:47</a></div></div>
<div class="ttc" id="aportasm__mpu_8h_html_a9aa6710dd342172a8f80299233af565e"><div class="ttname"><a href="portasm__mpu_8h.html#a9aa6710dd342172a8f80299233af565e">sp</a></div><div class="ttdeci">RSEG psp isb ldr tst it eq vstmdbeq control stmdb stmdb sp</div><div class="ttdef"><b>Definition:</b> <a href="portasm__mpu_8h_source.html#l00065">portasm_mpu.h:60</a></div></div>
<div class="ttc" id="aportasm__mpu_8h_html_ad4557f79eb7284c5a3f8bbbbd4b7be20"><div class="ttname"><a href="portasm__mpu_8h.html#ad4557f79eb7284c5a3f8bbbbd4b7be20">r0</a></div><div class="ttdeci">RSEG psp isb ldr tst it eq vstmdbeq r0</div><div class="ttdef"><b>Definition:</b> <a href="portasm__mpu_8h_source.html#l00056">portasm_mpu.h:56</a></div></div>
<div class="ttc" id="aportasm__mpu_8h_html_aab48038750bdfe34947e4b1e8b28b21c"><div class="ttname"><a href="portasm__mpu_8h.html#aab48038750bdfe34947e4b1e8b28b21c">r14</a></div><div class="ttdeci">RSEG psp isb ldr tst r14</div><div class="ttdef"><b>Definition:</b> <a href="portasm__mpu_8h_source.html#l00054">portasm_mpu.h:50</a></div></div>
<div class="ttc" id="aportasm__mpu_8h_html_ad41690af61c1019ceb37251ba4fc058b"><div class="ttname"><a href="portasm__mpu_8h.html#ad41690af61c1019ceb37251ba4fc058b">r1</a></div><div class="ttdeci">RSEG psp isb ldr tst it eq vstmdbeq control stmdb stmdb msr r0 dsb isb bl vTaskSwitchContext mov msr r0 ldmia ldr add r1</div><div class="ttdef"><b>Definition:</b> <a href="portasm__mpu_8h_source.html#l00079">portasm_mpu.h:79</a></div></div>
<div class="ttc" id="a_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h_html_a3b9ca89bea1639d6dad074cee491b60b"><div class="ttname"><a href="_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h.html#a3b9ca89bea1639d6dad074cee491b60b">vPortRestoreContextOfFirstTask</a></div><div class="ttdeci">void vPortRestoreContextOfFirstTask(void) PRIVILEGED_FUNCTION</div></div>
<div class="ttc" id="a_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h_html_ab620761336a86016a92fe379d409ac4b"><div class="ttname"><a href="_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h.html#ab620761336a86016a92fe379d409ac4b">vPortSVCHandler_C</a></div><div class="ttdeci">void vPortSVCHandler_C(uint32_t *pulParam)</div><div class="ttdef"><b>Definition:</b> <a href="_i_a_r_2_a_r_m___c_m4_f_2port__mpu_8h_source.html#l00256">port_mpu.h:256</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
